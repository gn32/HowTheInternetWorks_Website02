<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How does the Internet work</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<div>

<header class="bg-light">
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-dark bg-success mb-5 px-4 mx-4">
            <a class="navbar-brand" href="home.html">Home</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                    aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item  ">
                        <a class="nav-link " href="overview.html">Overview</a>
                    </li>
                    <li class="nav-item  ">
                        <a class="nav-link  " href="about.html">About</a>
                    </li>

                    <li class="nav-item ">
                        <a class="nav-link " href="index.html">Index <span class="sr-only">(current)</span></a>
                    </li>


                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">
                            Topics
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="Domain%20names%20&%20ICANN.html">Domain names & ICANN</a>
                            <a class="dropdown-item" href="IP%20Address,%20packets%20and%20routing.html">IP Addresses, Packets and Routing</a>
                            <a class="dropdown-item" href="DNS.html">DNS</a>

                            <a class="dropdown-item" href="HTTP.html">HTTPS</a>
                            <a class="dropdown-item" href="W3C.html">W3C,HTML & CSS</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
   </header>

  <header class="bg-light">
    <div class="container-fluid">
        <div class="row justify-content-around">
            <div class style="background-color: palegreen">
                <h1 class=" text-center mb-4 ">IP Addresses, packets and routing</h1>
            </div>
        </div>
        <div class="px-4 mb-4 ml-5 mr-5">

             <p><h3>What is in an IP packet?</h3>
            Each IP packet contains both a header (20 or 24 bytes long) and data (variable length). The header includes
                 the IP addresses of the source and destination, plus other fields that help to route the packet. The
                 data is the actual content, such as a string of letters or part of a webpage. A diagram of an IP
                 packet.
          </p>
          <p>
              <h3>What are IP packets used for?</h3>
              </p>
             <p>
            Most networks use TCP/IP as the network protocol, or set of rules for communication between devices, and the
                 rules of TCP/IP require information to be split into packets that contain both a segment of data to be
                 transferred and the address where the data is to be sent.
          </p>
             <h3>IP Address Classification</h3>
IP addresses are 32 bit integers which are represented in the familiar dot based notation. The dot based notation is nothing but a decimal representation for each byte of the IP address. For example, an IP address with a hex value of 0x800A080B is represented as 128.10.8.11.
The internet, as the name suggests, is a network of networks. Thus to uniquely identify a host on the internet, one needs to know the network's id and the host's id in the network. Thus IP address consist of two components, the network id and the host id. The network id is the number assigned to a network in the internet. Host id represents the id assigned to a host in the network.
The figure below shows different classes of IP addresses. These addresses differ in the number of bits assigned to the network and host ids. Different classes of addresses serve different needs. For example, a class A IP address is suitable when the internet consists of a small number of networks but each network consists of a large number of hosts. On the other extreme, class C addressing is suitable for internets with a very large number of networks, with a small number of hosts per network.
             <p>


             </p>
             <p><h3>Subnets</h3></p>
<p>The figure below describes a small internet consisting of three networks 128.8, 128.9.1 and 128.9.2. Strictly speaking, the internet consists of 128.8 network and 128.9.1 and 128.9.2 sub-networks (subnets). As we have seen in the previous section, 128.8 and 128.9 should have been classified as the network portion of a class B IP address. In this network 128.9 has been divided into two sub-networks (128.9.1 and 128.9.2) by using one of the bytes of the two byte host id as sub-network id.
</p>
<p>    Another way to look at this is that the first three bytes of IP addresses in 128.9.1 and 128.9.2 subnets are used for routing the packet. The other bits in the IP address are don't care from routing point of view. The specification of bits that should be used for routing is specified by associating a subnet mask with a routing entry. In this example, the subnet mask is 255.255.255.0 (0xFFFFFF00).
             </p>
             <p><h3>IP Routing</h3></p>
             <p>
Networks in the internet are connected to each other via routers. Routers carry traffic from one network/subnet to another. Routers maintain a routing table to decide how to route the IP packets. Each routing entry consists of the destination address, subnet mask and "route to" field. When a message needs to be routed to an IP address, the following steps are followed:
</P>
             <p>1.	The destination IP address is masked with the subnet mask and then compared with the destination field for all entries in the routing table.
</p>
             <p>2.	This comparison may yield a match with more than one entry the entry with the longest subnet mask will be selected. E.g. , a packet destined for 128.8.1.2 reaching Host A would match the entries corresponding to 128.8.1.2 and 128.8.0. The entry corresponding to 128.8.1.2 will be selected, as it has a longer subnet mask.
</p>
             <p>3.	Once an entry has been selected, the "route to" field is consulted and the action taken depends on the contents of this field:
<li>If the "route to" field contains SELF the packet is meant for this node. The IP packet is passed to the OS for application processing
</li>
             <li>If the "route to" field contains a LAN interface id, the packet is destined for a LAN that is directly connected to the router/host. In this case, the packet is routed directly on the LAN.
</li>
             <li>If the "route to" field contains an IP address, the packet is forwarded to the IP address specified. Further routing of the packet will be carried out by the specified IP address.
                 </li>
</p></li>
             <p>


             </p>
             <p><strong>Note:</strong> IP routing also supports a default entry. If the packet does not match any other entry, it is routed according to the default entry.
             </p>

       <div class="col-md text-center mt-4 mb-4 ">


             <img src="Images/IP_1.gif"  width="575" height="500">
       </div>
            <p>Another important aspect of internets is a node in the internet can have multiple IP addresses. There will be one IP address per interface. For example, the Router in the figure above has three IP addresses, viz. 128.8.1.1, 128.9.1.1 and 128.9.2.1.
            </p>

             <h3>Routing of a Packet from Host A to Host C</h3>
<p>Here we will trace the path taken by an IP packet sent from Host A to Host C. Routing related fields in the Ethernet MAC header and IP header are shown.
</p>
     <h3>Host A originates an IP packet towards Host C</h3>
             <p>

             </p>
<p>1.Application sends a message to Host C by sending it to 128.9.2.2 IP address (Host C's IP address).</p>
  <p>  2.This IP address matches the entry corresponding to 128.9.0.0. The "route to" field for the selected entry contains another IP address - 128.8.1.1. This is the IP address of the Router.
</p>
 <p>3.The IP routing table is accessed again for 128.8.1.1.</p>
<p>4.The entry that matches 128.8.1.1 contains LAN 0 interface id. This specifies that the destination node is directly connected to the host.
</P>
<p>5.This packet is passed to the device driver.</p>
<p>6.Device driver consults the ARP cache to identify the Ethernet MAC address corresponding to the 128.8.1.1. (ARP is covered in another article).
</p>
<p>7.Ethernet frame is sent to the MAC address found by ARP.</p>
             <p> The packet sent on the 128.8 LAN is:</p>
            <div class="col-md text-center mt-4 mb-4 ">
             <img src="Images/IP_2.png"  width="1000" height="75">
            </div>
             <p>

             </p>
             <h3>Routers send the IP packet to Host C</h3>
             <p>

             </p>
<p>1.Router receives the Ethernet frame and passes it to the IP layer.</p>
  <p> 2.IP routing table is consulted and a matching entry is found corresponding to 128.9.2 subnet.</p>
 <p>3.Packet is routed on the LAN 2 interface.</p>
<p>4.Host C's MAC address is found from the ARP cache.</P>
<p>5.Ethernet frame is addressed to Host C MAC Address.</p>
             <p>The packet sent over the 128.9.2 LAN is:</p>
                <div class="col-md text-center mt-4 mb-4 ">
             <img src="Images/IP_3.png"  width="1000" height="75">
                </div>
             <p>

             </p>
                          <h3>Host C receives the IP packet</h3>
             <p>

             </p>
<p></p><p>1.Host C receives the Ethernet frame and passes it to the IP layer.</p>
  <p> 2.IP routing table is searched and a match is detected with 128.9.2.2 entry.</p>
 <p>3.The "route to" field contains SELF, so the message is passed to the higher layer for delivery to the application</p>
        </div>
</div>
             </header>
